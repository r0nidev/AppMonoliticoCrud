<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
                xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:insert="fragments :: headerfiles">
    <meta charset="UTF-8">
    <title>Login</title>
</head>
<body>
<header th:insert="fragments :: nav">
</header>

<div class="container d-flex justify-content-center">
  <div class="card">
  <div class="card-header">
    <!-- add tabas -->
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link active" th:href="@{/login}">
          <i class="fas fa-user"></i> Login</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" th:href="@{/usuario/registro}">
          <i class="fas fa-user-plus"></i> Registro</a>
      </li>
    </ul>
  </div>
  <div class="card-body">
    <!-- show error before del formulario -->
    <div th:if="${registroOK}" class="alert alert-success alert-dismissible fade show mt-2" role="alert">
      <p th:text="${registroOK}"></p>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <form th:action="@{/signin}" method="post" sec:authorize="!isAuthenticated()">
      <!-- <div class="form-group">
        <label for="nombre">ID</label>
        <input type="text" class="form-control" id="id" name="id"  autocomplete="off" >
      </div> -->

      <!-- Proteger contra el ataque CRSf -->
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
      <!--  fin control ataque csrf -->

      <div class="form-group">
        <label for="nombreUsuario">Nombre de Usuario</label>
        <input type="text" class="form-control" id="nombreUsuario"
        name="nombreUsuario" required="required" autocomplete="off" >
      </div>
      <div class="form-group">
        <label for="password">Contrase침a</label>
        <input type="password" class="form-control" id="password"
         name="password" required="required">
      </div>
      <!-- check me out -->
      <div class="form-check">
        <input type="checkbox" class="form-check-input" id="checkRememberMe">
        <label class="form-check-label" for="checkRememberMe" name="checkRememberMe">Recodarme</label>
      </div>
      <div class="form-group">
        <button type="submit" class="btn btn-outline-success btn-block">
          <i class="far fa-sing-in-alt"></i> Iniciar Sesi칩n</button>
      </div>
    </form>

    <p sec:authorize="isAuthenticated()">Ya has iniciado sesi칩n.</p>
    <!-- Error Alert -->
    <div  class="alert alert-danger alert-dismissible fade show mt-2" role="alert">
      <p th:text="${param.error}"></p>
      <p>Credenciales err칩neas.</p>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

      <!-- <a th:href="@{/producto/lista}" style="text-decoration: none;">
        <button class="btn btn-outline-info btn-block">
        <i class="fas fa-arrow-circle-left"></i> Volver</button>
       </a> -->

  </div>
</div>
</div>

<footer th:insert="fragments :: footer"></footer>
<div th:insert="fragments :: scripts">

</div>
</body>
</html>
