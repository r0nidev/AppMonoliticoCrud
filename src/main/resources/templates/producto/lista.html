<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:insert="fragments :: headerfiles">
    <meta charset="UTF-8">
    <meta charset="ISO-8859-1">
    <title>Home</title>
</head>
<body>
  <header th:insert="fragments :: nav">
  </header>

    <div class="container">
      <!-- <table class="table table-dark"> -->
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Producto</th>
            <!-- <th scope="col">Nombre</th> -->
            <th scope="col">Precio (MXN)</th>
            <th scope="col">Acciones</th>
            <!-- <th scope="col" sec:authorize="hasRole('ROLE_ADMIN')">Acciones</th> -->
            <!-- <th scope="col" sec:authorize="hasRole('ROLE_ADMIN')">Edit</th>
            <th scope="col" sec:authorize="hasRole('ROLE_ADMIN')">Delete</th> -->
            <!-- <th scope="col">Edit</th> -->
      <!-- <th scope="col">Delete</th> -->
    </tr>
  </thead>
  <tbody>
    <!-- Recorremos with thymeleaf -->
    <tr th:each="product: ${productos}">
      <th scope="row" th:text="${product.id}" ></th>
      <th th:text="${product.nombre}" ></th>
      <td th:text="${product.precio}"></td>
      <!-- code Below para usuario normal -->
      <!-- <td>
        <a th:href="@{'/producto/detalle/' + ${product.id} }">
          <button class="btn btn-outline-primary"><i class="far fa-eye"></i></button></a> -->
        <!-- <a th:href="@{'/producto/editar/' + ${product.id} }"><button class="btn btn-outline-warning"><i class="far fa-edit"></i></button></a>       -->
        <!-- <a th:href="@{'/producto/borrar/' + ${product.id} }"><button class="btn btn-outline-danger"><i class="far fa-trash-alt"></i></button></a> -->
       <!-- </td> -->
       <td>
         <a th:href="@{'/producto/detalle/' + ${product.id} }">
           <button class="btn btn-outline-primary"><i class="far fa-eye"></i></button></a>
         <a th:href="@{'/producto/editar/' + ${product.id} }" sec:authorize="hasRole('ROLE_ADMIN')">
           <button class="btn btn-outline-warning"><i class="far fa-edit"></i></button></a>
           <a th:href="@{'/producto/borrar/' + ${product.id} }" sec:authorize="hasRole('ROLE_ADMIN')">
           <!-- Cambiemos de propiedad de eliminar, because estamos using Sweet Alert -->
           <!-- <a th:onclick="eliminar([[${product.id}]])" sec:authorize="hasRole('ROLE_ADMIN')"> -->
             <button class="btn btn-outline-danger"><i class="far fa-trash-alt"></i></button></a>


             <!-- <button class="btn btn-outline-danger" style="margin-left: 10px;"><i class="far fa-trash-alt"></i></button></a> -->
       </td>

       <!-- <td sec:authorize="hasRole('ROLE_ADMIN')">
         <a th:href="@{'/producto/editar/' + ${product.id} }">
           <button class="btn btn-outline-warning"><i class="far fa-edit"></i></button></a>
       </td>
       <td sec:authorize="hasRole('ROLE_ADMIN')">
         <a th:href="@{'/producto/borrar/' + ${product.id} }">
           <button class="btn btn-outline-danger"><i class="far fa-trash-alt"></i></button></a>
       </td> -->
    </tr>


  </tbody>
</table>
<!-- Only ADMIN puede add new product -->
    <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/producto/nuevo}">
      <button type="button" class="btn btn-outline-success"><i class="fas fa-plus-circle"></i> New Product</button>
     </a>
    </div>

      <footer th:insert="fragments :: footer"></footer>
      <div th:insert="fragments :: scripts">
    </div>

<!-- jQuery  -->
<!-- <script src="https://code.jquery.com/jquery-3.4.1.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script> -->
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

<!-- Sweetalert -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<!-- funcionesJS -->
    <script src="/funciones.js"></script>
</body>
</html>
